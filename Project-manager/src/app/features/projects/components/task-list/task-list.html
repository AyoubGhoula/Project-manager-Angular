@if (tasks.length === 0) {
  <p class="mt-4 text-sm text-slate-500 italic">Aucune tâche</p>
} @else {
<div class="mt-4 space-y-4">
  @for (task of tasks; track task.title) {
  <div
    class="rounded-xl border bg-white/90 p-4 shadow-sm border-l-4"
    [appHighlightStatus]="task.status"
  >
    <div class="flex items-start justify-between gap-4">
      <div class="flex-1">
        <p class="text-sm font-semibold" [ngClass]="task.priority | priorityColor">
          {{ task.title }}
        </p>
        <p class="mt-1 text-xs text-slate-500">
          Priorité :
          <span
            class="rounded-full px-2 py-0.5 text-[11px] font-semibold"
            [ngClass]="task.priority | priorityColor"
          >
            {{ task.priority }}
          </span>
        </p>
      </div>
      <div class="flex items-center gap-2 shrink-0">
        <span
          class="rounded-full whitespace-nowrap px-2.5 py-1 text-xs font-medium uppercase tracking-wide"
          [ngClass]="{
            'bg-amber-200 text-amber-800': task.status === 'En attente',
            'bg-sky-200 text-sky-800': task.status === 'En cours',
            'bg-green-200 text-green-800': task.status === 'Terminé'
          }"
          [ngStyle]="{
            'border': task.status === 'Terminé' ? '1px solid #22c55e' :
                      task.status === 'En cours' ? '1px solid #0ea5e9' :
                      task.status === 'En attente' ? '1px solid #f59e0b' : '1px solid #94a3b8'
          }"
        >
          {{ task.status }}
        </span>

        <button
          (click)="nextStatus(task)"
          class="rounded-lg px-2 py-1 text-[11px] font-medium transition cursor-pointer"
          [ngClass]="{
            'bg-cyan-100 text-cyan-700 hover:bg-cyan-200': task.status === 'En attente',
            'bg-green-100 text-green-700 hover:bg-green-200': task.status === 'En cours',
            'bg-amber-100 text-amber-700 hover:bg-amber-200': task.status === 'Terminé'
          }"
          [title]="'Passer à : ' + getNextStatusLabel(task.status)"
        >
          @if (task.status === 'En attente') {
            &#9654; Démarrer
          } @else if (task.status === 'En cours') {
            &#10003; Terminer
          } @else {
            &#8634; Réinitialiser
          }
        </button>
        <!-- Bouton supprimer -->
        <button
          (click)="deleteTask(task)"
          class="rounded-lg bg-red-100 px-2 py-1 text-[11px] font-medium text-red-600 transition hover:bg-red-200 cursor-pointer"
          title="Supprimer cette tâche"
        >
          &#10005;
        </button>
      </div>
    </div>
  </div>
  }
</div>
}
